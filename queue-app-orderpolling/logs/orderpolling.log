[2018-01-23 23:23:00:601] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:23:00:603] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:23:00:607] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:23:01:758] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:771] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:793] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:23:01:825] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:23:01:857] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:23:01:860] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:23:01:860] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:128)]
支付结果 *未知 继续轮询查询

[2018-01-23 23:23:01:874] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:23:01:875] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:23:01:875] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:23:01:890] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:891] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:893] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:23:01:896] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:23:01:908] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:23:01:910] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:23:01:910] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:128)]
支付结果 *未知 继续轮询查询

[2018-01-23 23:23:01:922] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:23:01:923] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:23:01:923] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:23:01:935] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:936] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:01:938] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:23:01:940] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:23:01:956] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:23:01:959] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:23:01:960] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:128)]
支付结果 *未知 继续轮询查询

[2018-01-23 23:23:31:116] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:23:31:116] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:23:31:117] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:23:31:127] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:31:128] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:23:31:129] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:23:31:131] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:23:31:142] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:23:31:144] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:23:31:145] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:128)]
支付结果 *未知 继续轮询查询

[2018-01-23 23:25:16:456] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:25:16:456] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:25:16:459] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:25:16:490] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:25:16:490] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-23 23:25:16:492] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:25:16:494] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:25:16:509] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:25:16:511] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:25:16:512] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:128)]
支付结果 *未知 继续轮询查询

[2018-01-23 23:28:21:770] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012322955805049294962690

[2018-01-23 23:28:21:770] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012322955805049294962690

[2018-01-23 23:28:21:770] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012322955805049294962690]

[2018-01-23 23:28:21:858] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"支付失败","status":"FAILED"}

[2018-01-23 23:28:21:859] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"支付失败","status":"FAILED"}

[2018-01-23 23:28:21:860] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:28:21:862] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012322955805049294962690(String)

[2018-01-23 23:28:21:873] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:28:21:877] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361570733993513987, orderTransactionNo=18012322955805049294962690, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 22:10:56 CST 2018]

[2018-01-23 23:28:21:877] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:108)]
支付结果为 *失败 结束订单

[2018-01-23 23:28:21:878] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-23 23:28:21:880] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: FAILED(String), 18012322955805049294962690(String)

[2018-01-23 23:28:21:891] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-23 23:30:09:805] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:93)]
银行渠道编号: WEIXINPAY_IMPL, 平台交易流水号: 18012323955823755442016257

[2018-01-23 23:30:09:807] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:24)]
银行渠道(WEIXINPAY_IMPL) 银行渠道交易流水号: 18012323955823755442016257

[2018-01-23 23:30:09:813] [INFO ] [method:com.queue.utils.HttpUtils.post(HttpUtils.java:64)]
Http Post请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery, 请求值:[orderTransactionNo=18012323955823755442016257]

[2018-01-23 23:30:10:950] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:30)]
银行渠道(WEIXINPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-23 23:30:10:972] [INFO ] [method:com.queue.banks.impl.WeixinPayImpl.orderQuery(WeixinPayImpl.java:37)]
银行渠道(WEIXINPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-23 23:30:10:994] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-23 23:30:11:020] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012323955823755442016257(String)

[2018-01-23 23:30:11:057] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-23 23:30:11:060] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:99)]
平台订单当前信息: Order [id=6361589439981179907, orderTransactionNo=18012323955823755442016257, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Tue Jan 23 23:25:16 CST 2018]

[2018-01-23 23:30:11:060] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:117)]
支付结果为 *成功 结束订单

[2018-01-23 23:30:11:061] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-23 23:30:11:062] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012323955823755442016257(String)

[2018-01-23 23:30:11:116] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 22:57:36:363] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:33)]
订单轮询接收消息: {"createTime":1516803480115,"pollingLimitTimes":0,"pollingTimes":0,"id":6361934898025223171,"orderTransactionNo":"18012422956169214270451713"}

[2018-01-24 22:57:36:741] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 22:57:36:772] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361934898025223171(Long), 2018-01-24 22:18:00.115(Timestamp), 2018-01-24 22:57:36.458(Timestamp), 0(Integer), 0(Integer), 18012422956169214270451713(String), CREATED(String), null(String)

[2018-01-24 22:57:36:807] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 22:57:36:855] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:33)]
订单轮询接收消息: {"createTime":1516803752779,"pollingLimitTimes":0,"pollingTimes":0,"id":6361936039593137155,"orderTransactionNo":"18012422956170357948100610"}

[2018-01-24 22:57:36:861] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 22:57:36:865] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361936039593137155(Long), 2018-01-24 22:22:32.779(Timestamp), 2018-01-24 22:57:36.855(Timestamp), 0(Integer), 0(Integer), 18012422956170357948100610(String), CREATED(String), null(String)

[2018-01-24 22:57:36:876] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:00:33:834] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:33)]
订单轮询接收消息: {"createTime":1516806012370,"pollingLimitTimes":0,"pollingTimes":0,"id":6361945518804063235,"orderTransactionNo":"18012423956179835351232513"}

[2018-01-24 23:00:34:202] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:00:34:233] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361945518804063235(Long), 2018-01-24 23:00:12.37(Timestamp), 2018-01-24 23:00:33.916(Timestamp), 0(Integer), 5(Integer), 18012423956179835351232513(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:00:34:309] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:01:27:646] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:33)]
订单轮询接收消息: {"createTime":1516806087495,"pollingLimitTimes":0,"pollingTimes":0,"id":6361945832168903683,"orderTransactionNo":"18012423956180150456709121"}

[2018-01-24 23:01:27:655] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:01:27:660] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361945832168903683(Long), 2018-01-24 23:01:27.495(Timestamp), 2018-01-24 23:01:27.647(Timestamp), 0(Integer), 5(Integer), 18012423956180150456709121(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:01:27:680] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:09:46:692] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:32)]
订单轮询接收消息: {"createTime":1516806585489,"pollingLimitTimes":0,"pollingTimes":0,"id":6361947923260134403,"orderTransactionNo":"18012423956182239186624514"}

[2018-01-24 23:09:47:277] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:09:47:310] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361947923260134403(Long), 2018-01-24 23:09:45.489(Timestamp), 2018-01-24 23:09:46.812(Timestamp), 0(Integer), 5(Integer), 18012423956182239186624514(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:09:47:314] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:09:59:359] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:32)]
订单轮询接收消息: {"createTime":1516806599206,"pollingLimitTimes":0,"pollingTimes":0,"id":6361947978486535171,"orderTransactionNo":"18012423956182296728281089"}

[2018-01-24 23:09:59:370] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:09:59:379] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361947978486535171(Long), 2018-01-24 23:09:59.206(Timestamp), 2018-01-24 23:09:59.359(Timestamp), 0(Integer), 5(Integer), 18012423956182296728281089(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:09:59:383] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:11:32:772] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:32)]
订单轮询接收消息: {"createTime":1516806692604,"pollingLimitTimes":0,"pollingTimes":0,"id":6361948370188391427,"orderTransactionNo":"18012423956182688463691777"}

[2018-01-24 23:11:32:781] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:11:32:789] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361948370188391427(Long), 2018-01-24 23:11:32.604(Timestamp), 2018-01-24 23:11:32.772(Timestamp), 0(Integer), 5(Integer), 18012423956182688463691777(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:11:32:808] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:11:43:366] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:32)]
订单轮询接收消息: {"createTime":1516806703254,"pollingLimitTimes":0,"pollingTimes":0,"id":6361948414673179651,"orderTransactionNo":"18012423956182733141417985"}

[2018-01-24 23:11:43:903] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:11:43:940] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361948414673179651(Long), 2018-01-24 23:11:43.254(Timestamp), 2018-01-24 23:11:43.56(Timestamp), 0(Integer), 5(Integer), 18012423956182733141417985(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:11:43:996] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:39:32:845] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516808360096,"pollingLimitTimes":0,"pollingTimes":0,"id":6361955366086136835,"orderTransactionNo":"18012423956189682427760642"}

[2018-01-24 23:39:33:245] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:39:33:283] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361955366086136835(Long), 2018-01-24 23:39:20.096(Timestamp), 2018-01-24 23:39:32.93(Timestamp), 0(Integer), 5(Integer), 18012423956189682427760642(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:39:33:302] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:39:33:347] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6361955366086136835, createTime=Wed Jan 24 23:39:20 CST 2018, editTime=Wed Jan 24 23:39:32 CST 2018, pollingTimes=0, pollingLimitTimes=5, orderTransactionNo=18012423956189682427760642, status=CREATED, pollingRule={1:0,2:1,3:2,4:5,5:15}]

[2018-01-24 23:39:57:631] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516808397476,"pollingLimitTimes":0,"pollingTimes":0,"id":6361955521053086723,"orderTransactionNo":"18012423956189839219232770"}

[2018-01-24 23:39:57:643] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:39:57:650] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361955521053086723(Long), 2018-01-24 23:39:57.476(Timestamp), 2018-01-24 23:39:57.632(Timestamp), 0(Integer), 5(Integer), 18012423956189839219232770(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:39:57:657] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:39:57:692] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6361955521053086723, createTime=Wed Jan 24 23:39:57 CST 2018, editTime=Wed Jan 24 23:39:57 CST 2018, pollingTimes=0, pollingLimitTimes=5, orderTransactionNo=18012423956189839219232770, status=CREATED, pollingRule={1:0,2:1,3:2,4:5,5:15}]

[2018-01-24 23:40:06:775] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516808406604,"pollingLimitTimes":0,"pollingTimes":0,"id":6361955559355470851,"orderTransactionNo":"18012423956189877509033985"}

[2018-01-24 23:40:06:792] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:40:06:798] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361955559355470851(Long), 2018-01-24 23:40:06.604(Timestamp), 2018-01-24 23:40:06.776(Timestamp), 0(Integer), 5(Integer), 18012423956189877509033985(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:40:06:839] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:40:06:883] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6361955559355470851, createTime=Wed Jan 24 23:40:06 CST 2018, editTime=Wed Jan 24 23:40:06 CST 2018, pollingTimes=0, pollingLimitTimes=5, orderTransactionNo=18012423956189877509033985, status=CREATED, pollingRule={1:0,2:1,3:2,4:5,5:15}]

[2018-01-24 23:40:07:904] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516808407774,"pollingLimitTimes":0,"pollingTimes":0,"id":6361955564170531843,"orderTransactionNo":"18012423956189882416369666"}

[2018-01-24 23:40:07:914] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-24 23:40:07:922] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6361955564170531843(Long), 2018-01-24 23:40:07.774(Timestamp), 2018-01-24 23:40:07.906(Timestamp), 0(Integer), 5(Integer), 18012423956189882416369666(String), CREATED(String), {1:0,2:1,3:2,4:5,5:15}(String)

[2018-01-24 23:40:07:932] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-24 23:40:07:985] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6361955564170531843, createTime=Wed Jan 24 23:40:07 CST 2018, editTime=Wed Jan 24 23:40:07 CST 2018, pollingTimes=0, pollingLimitTimes=5, orderTransactionNo=18012423956189882416369666, status=CREATED, pollingRule={1:0,2:1,3:2,4:5,5:15}]

[2018-01-26 23:06:01:901] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516979160636,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362671750856332291,"orderTransactionNo":"18012623956906071782346753"}

[2018-01-26 23:06:02:574] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-26 23:06:02:595] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362671750856332291(Long), 2018-01-26 23:06:00.636(Timestamp), 2018-01-26 23:06:02.071(Timestamp), 0(Integer), 7(Integer), 18012623956906071782346753(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-26 23:06:02:629] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-26 23:06:02:672] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362671750856332291, createTime=Fri Jan 26 23:06:00 CST 2018, editTime=Fri Jan 26 23:06:02 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012623956906071782346753, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-26 23:06:02:673] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362671750856332291, 上次通知时间: 2018-01-26 23:06:02

[2018-01-26 23:06:02:674] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362671750856332291, 任务添加成功后,当前队列大小: 1

[2018-01-26 23:16:06:328] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516979765513,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362674286766085123,"orderTransactionNo":"18012623956908608858116097"}

[2018-01-26 23:16:06:333] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-26 23:16:06:334] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362674286766085123(Long), 2018-01-26 23:16:05.513(Timestamp), 2018-01-26 23:16:06.329(Timestamp), 0(Integer), 7(Integer), 18012623956908608858116097(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-26 23:16:06:409] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-26 23:16:06:460] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362674286766085123, createTime=Fri Jan 26 23:16:05 CST 2018, editTime=Fri Jan 26 23:16:06 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012623956908608858116097, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-26 23:16:06:460] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362674286766085123, 上次通知时间: 2018-01-26 23:16:06

[2018-01-26 23:16:06:461] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362674286766085123, 任务添加成功后,当前队列大小: 2

[2018-01-27 00:00:59:494] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516981894540,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362683217076835331,"orderTransactionNo":"18012623956917538640363522"}

[2018-01-27 00:00:59:595] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
当前活动线程: 1

[2018-01-27 00:00:59:596] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
最大线程: 50

[2018-01-27 00:00:59:596] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:51)]
tasks.size(): 0

[2018-01-27 00:00:59:965] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:01:00:016] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362683217076835331(Long), 2018-01-26 23:51:34.54(Timestamp), 2018-01-27 00:00:59.593(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012623956917538640363522(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:01:00:052] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:01:00:164] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362683217076835331, createTime=Fri Jan 26 23:51:34 CST 2018, editTime=Sat Jan 27 00:00:59 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012623956917538640363522, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:01:00:165] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362683217076835331, 上次通知时间: 2018-01-27 00:01:00

[2018-01-27 00:01:00:166] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362683217076835331, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:01:00:317] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
当前活动线程: 1

[2018-01-27 00:01:00:317] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
最大线程: 50

[2018-01-27 00:01:00:317] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:51)]
tasks.size(): 0

[2018-01-27 00:07:12:730] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516982818057,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362687091472880643,"orderTransactionNo":"18012700956921412151459841"}

[2018-01-27 00:07:12:826] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
当前活动线程: 1

[2018-01-27 00:07:12:826] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:47)]
最大线程: 50

[2018-01-27 00:07:12:827] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
tasks.size(): 0

[2018-01-27 00:07:13:312] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:07:13:350] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362687091472880643(Long), 2018-01-27 00:06:58.057(Timestamp), 2018-01-27 00:07:12.848(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956921412151459841(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:07:13:407] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:07:13:695] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362687091472880643, createTime=Sat Jan 27 00:06:58 CST 2018, editTime=Sat Jan 27 00:07:12 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956921412151459841, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:07:13:696] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362687091472880643, 上次通知时间: 2018-01-27 00:07:13

[2018-01-27 00:07:13:696] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362687091472880643, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:07:13:705] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:07:13 CST 2018, 轮询编号: 6362687091472880643

[2018-01-27 00:07:13:706] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956921412151459841

[2018-01-27 00:07:13:706] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956921412151459841

[2018-01-27 00:07:13:710] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956921412151459841

[2018-01-27 00:07:13:847] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
当前活动线程: 2

[2018-01-27 00:07:13:848] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:47)]
最大线程: 50

[2018-01-27 00:07:13:856] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
tasks.size(): 0

[2018-01-27 00:07:14:611] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:07:14:612] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:07:14:615] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:07:14:615] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956921412151459841(String)

[2018-01-27 00:07:14:629] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:07:14:630] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362687089304425475, orderTransactionNo=18012700956921412151459841, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:06:58 CST 2018]

[2018-01-27 00:07:14:630] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:122)]
支付结果为 *成功 结束订单

[2018-01-27 00:07:14:631] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:07:14:631] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012700956921412151459841(String)

[2018-01-27 00:07:14:737] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:07:14:737] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@ec4ecec

[2018-01-27 00:07:14:738] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:07:14:739] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:07:13.705(Timestamp), 1(Integer), SUCCESS(String), 18012700956921412151459841(String)

[2018-01-27 00:07:14:741] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:07:14:776] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:56)]
tasks.size(): 0

[2018-01-27 00:12:43:337] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516983162773,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362688535747908611,"orderTransactionNo":"18012700956922858003546114"}

[2018-01-27 00:12:43:343] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:12:43:345] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362688535747908611(Long), 2018-01-27 00:12:42.773(Timestamp), 2018-01-27 00:12:43.337(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956922858003546114(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:12:43:377] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:12:43:428] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362688535747908611, createTime=Sat Jan 27 00:12:42 CST 2018, editTime=Sat Jan 27 00:12:43 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956922858003546114, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:12:43:429] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362688535747908611, 上次通知时间: 2018-01-27 00:12:43

[2018-01-27 00:12:43:429] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362688535747908611, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:12:43:438] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:12:43 CST 2018, 轮询编号: 6362688535747908611

[2018-01-27 00:12:43:439] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956922858003546114

[2018-01-27 00:12:43:439] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956922858003546114

[2018-01-27 00:12:43:439] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956922858003546114

[2018-01-27 00:12:43:461] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:12:43:461] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:12:43:462] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:12:43:463] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956922858003546114(String)

[2018-01-27 00:12:43:466] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:12:43:467] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362688535131345923, orderTransactionNo=18012700956922858003546114, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:12:42 CST 2018]

[2018-01-27 00:12:43:467] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:122)]
支付结果为 *成功 结束订单

[2018-01-27 00:12:43:468] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:12:43:469] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012700956922858003546114(String)

[2018-01-27 00:12:43:474] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:12:43:475] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@4e6fefc4

[2018-01-27 00:12:43:476] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:12:43:477] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:12:43.438(Timestamp), 1(Integer), SUCCESS(String), 18012700956922858003546114(String)

[2018-01-27 00:12:43:478] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:12:43:572] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:56)]
tasks.size(): 0

[2018-01-27 00:12:43:580] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
当前活动线程: 1

[2018-01-27 00:12:43:580] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:47)]
最大线程: 50

[2018-01-27 00:12:43:580] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
tasks.size(): 0

[2018-01-27 00:13:35:824] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516983215375,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362688756708037635,"orderTransactionNo":"18012700956923078636519426"}

[2018-01-27 00:13:35:832] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:13:35:833] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362688756708037635(Long), 2018-01-27 00:13:35.375(Timestamp), 2018-01-27 00:13:35.825(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956923078636519426(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:13:35:886] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:13:35:942] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362688756708037635, createTime=Sat Jan 27 00:13:35 CST 2018, editTime=Sat Jan 27 00:13:35 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956923078636519426, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:13:35:943] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362688756708037635, 上次通知时间: 2018-01-27 00:13:35

[2018-01-27 00:13:35:943] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362688756708037635, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:13:35:953] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:13:35 CST 2018, 轮询编号: 6362688756708037635

[2018-01-27 00:13:35:954] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956923078636519426

[2018-01-27 00:13:35:954] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956923078636519426

[2018-01-27 00:13:35:954] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956923078636519426

[2018-01-27 00:13:35:966] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:13:35:967] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:13:35:968] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:13:35:969] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956923078636519426(String)

[2018-01-27 00:13:35:971] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:13:35:972] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362688755147756547, orderTransactionNo=18012700956923078636519426, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:13:35 CST 2018]

[2018-01-27 00:13:35:972] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:122)]
支付结果为 *成功 结束订单

[2018-01-27 00:13:35:973] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:13:35:973] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012700956923078636519426(String)

[2018-01-27 00:13:35:981] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:13:35:981] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@3c012b0b

[2018-01-27 00:13:35:982] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:13:35:983] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:13:35.953(Timestamp), 1(Integer), SUCCESS(String), 18012700956923078636519426(String)

[2018-01-27 00:13:35:984] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:13:36:020] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:56)]
tasks.size(): 0

[2018-01-27 00:13:36:094] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
当前活动线程: 1

[2018-01-27 00:13:36:094] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:47)]
最大线程: 50

[2018-01-27 00:13:36:094] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:49)]
tasks.size(): 0

[2018-01-27 00:20:41:288] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:20:41:291] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:20:41:291] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:20:57:262] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516983656198,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362690606429656067,"orderTransactionNo":"18012700956924927569575938"}

[2018-01-27 00:20:57:900] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:20:57:930] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362690606429656067(Long), 2018-01-27 00:20:56.198(Timestamp), 2018-01-27 00:20:57.359(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956924927569575938(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:20:57:984] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:20:58:075] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362690606429656067, createTime=Sat Jan 27 00:20:56 CST 2018, editTime=Sat Jan 27 00:20:57 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956924927569575938, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:20:58:077] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362690606429656067, 上次通知时间: 2018-01-27 00:20:58

[2018-01-27 00:20:58:077] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362690606429656067, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:20:58:096] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:20:58 CST 2018, 轮询编号: 6362690606429656067

[2018-01-27 00:20:58:097] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956924927569575938

[2018-01-27 00:20:58:097] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956924927569575938

[2018-01-27 00:20:58:100] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956924927569575938

[2018-01-27 00:20:58:241] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:20:58:241] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:20:58:251] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:20:58:980] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:20:58:981] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:20:58:984] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:20:58:985] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956924927569575938(String)

[2018-01-27 00:20:58:999] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:20:59:000] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362690604609328131, orderTransactionNo=18012700956924927569575938, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:20:56 CST 2018]

[2018-01-27 00:20:59:000] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:122)]
支付结果为 *成功 结束订单

[2018-01-27 00:20:59:001] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:20:59:001] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012700956924927569575938(String)

[2018-01-27 00:20:59:055] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:20:59:055] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@2c7b73c9

[2018-01-27 00:20:59:056] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:20:59:057] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:20:58.095(Timestamp), 1(Integer), SUCCESS(String), 18012700956924927569575938(String)

[2018-01-27 00:20:59:058] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:20:59:081] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:23:12:055] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516983791958,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362691173877044227,"orderTransactionNo":"18012700956925496996675585"}

[2018-01-27 00:23:12:060] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:23:12:061] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362691173877044227(Long), 2018-01-27 00:23:11.958(Timestamp), 2018-01-27 00:23:12.056(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956925496996675585(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:23:12:123] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:23:12:196] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691173877044227, createTime=Sat Jan 27 00:23:11 CST 2018, editTime=Sat Jan 27 00:23:12 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956925496996675585, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:23:12:197] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691173877044227, 上次通知时间: 2018-01-27 00:23:12

[2018-01-27 00:23:12:197] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691173877044227, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:23:12:214] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:23:12 CST 2018, 轮询编号: 6362691173877044227

[2018-01-27 00:23:12:215] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925496996675585

[2018-01-27 00:23:12:215] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925496996675585

[2018-01-27 00:23:12:215] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925496996675585

[2018-01-27 00:23:12:238] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:23:12:239] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付成功","status":"SUCCESS"}

[2018-01-27 00:23:12:240] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:23:12:241] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925496996675585(String)

[2018-01-27 00:23:12:243] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:23:12:243] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691173541499907, orderTransactionNo=18012700956925496996675585, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:23:11 CST 2018]

[2018-01-27 00:23:12:244] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:122)]
支付结果为 *成功 结束订单

[2018-01-27 00:23:12:244] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:23:12:245] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: SUCCESS(String), 18012700956925496996675585(String)

[2018-01-27 00:23:12:261] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:23:12:262] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@196a6d05

[2018-01-27 00:23:12:263] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:23:12:264] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:23:12.214(Timestamp), 1(Integer), SUCCESS(String), 18012700956925496996675585(String)

[2018-01-27 00:23:12:265] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:23:12:312] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:23:12:355] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:23:12:355] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:23:12:358] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:24:55:796] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516983880383,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362691546536760323,"orderTransactionNo":"18012700956925867869626369"}

[2018-01-27 00:24:55:897] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:55:900] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:55:900] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:24:56:287] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:24:56:318] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362691546536760323(Long), 2018-01-27 00:24:40.383(Timestamp), 2018-01-27 00:24:55.9(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956925867869626369(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:24:56:378] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:24:56:415] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:55 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:24:56:416] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:56

[2018-01-27 00:24:56:417] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:56:455] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:56 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:56:457] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:56:457] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:56:461] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:56:579] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:24:56:601] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:56:602] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:24:57:328] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:329] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:331] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:332] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:348] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:349] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:349] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@4a566347

[2018-01-27 00:24:57:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:56 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:56 CST 2018, pollingExecuteTime=1516983896415]

[2018-01-27 00:24:57:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:56

[2018-01-27 00:24:57:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:351] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:351] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:353] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:56.455(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:57:355] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:57 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:57:356] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:356] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:356] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:57:372] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:376] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:377] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:377] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:380] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:380] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@389f1b54

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:57 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:56 CST 2018, pollingExecuteTime=1516983896455]

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:57

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:381] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:382] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:382] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:57.355(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:57:507] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 3

[2018-01-27 00:24:57:508] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:57:508] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:24:57:521] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:57 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:57:521] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:522] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:522] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:57:538] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:539] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:540] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:541] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:545] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:546] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:546] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:547] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@3cd622ce

[2018-01-27 00:24:57:547] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:57 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:57 CST 2018, pollingExecuteTime=1516983897355]

[2018-01-27 00:24:57:547] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:57

[2018-01-27 00:24:57:548] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:548] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:549] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:550] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:57.521(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:57:659] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:57:660] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:57:660] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:24:57:665] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:57 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:57:665] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:665] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:666] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:57:681] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:682] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:683] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:684] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:687] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:688] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:688] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:688] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@59585f45

[2018-01-27 00:24:57:689] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:57 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:57 CST 2018, pollingExecuteTime=1516983897521]

[2018-01-27 00:24:57:690] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:57

[2018-01-27 00:24:57:690] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:690] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:691] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:693] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:57.665(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:57:810] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:57:811] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:57:811] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:24:57:821] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:57 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:57:822] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:822] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:822] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:57:841] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:841] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:842] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:843] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:845] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:846] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:846] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:846] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6b8bf736

[2018-01-27 00:24:57:846] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:57 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:57 CST 2018, pollingExecuteTime=1516983897665]

[2018-01-27 00:24:57:846] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:57

[2018-01-27 00:24:57:847] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:847] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:847] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:848] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:57.821(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:57:962] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:57:962] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:57:962] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:24:57:966] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:57 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:57:966] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:966] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:57:966] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:57:975] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:975] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:57:976] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:976] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:57:978] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:57:978] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:57:979] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:57:979] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@79b34e6c

[2018-01-27 00:24:57:979] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362691546536760323, createTime=Sat Jan 27 00:24:40 CST 2018, editTime=Sat Jan 27 00:24:57 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956925867869626369, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:24:57 CST 2018, pollingExecuteTime=1516983897821]

[2018-01-27 00:24:57:980] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362691546536760323, 上次通知时间: 2018-01-27 00:24:57

[2018-01-27 00:24:57:980] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362691546536760323, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:24:57:980] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:24:57:980] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:57:981] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:57.966(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956925867869626369(String)

[2018-01-27 00:24:58:112] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:58:112] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:58:113] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:24:58:118] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:24:58 CST 2018, 轮询编号: 6362691546536760323

[2018-01-27 00:24:58:119] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956925867869626369

[2018-01-27 00:24:58:120] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956925867869626369

[2018-01-27 00:24:58:120] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956925867869626369

[2018-01-27 00:24:58:130] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:58:131] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:24:58:131] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:58:132] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956925867869626369(String)

[2018-01-27 00:24:58:133] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:24:58:134] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362691544708043779, orderTransactionNo=18012700956925867869626369, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:24:40 CST 2018]

[2018-01-27 00:24:58:134] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:24:58:134] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@47cf3624

[2018-01-27 00:24:58:134] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:24:58:135] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:24:58:136] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:24:58.118(Timestamp), 7(Integer), FAILED(String), 18012700956925867869626369(String)

[2018-01-27 00:24:58:137] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:24:58:249] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:24:58:263] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:24:58:263] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:24:58:263] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:30:25:192] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:25:194] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:25:194] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:30:33:098] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516984232106,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362693021820277763,"orderTransactionNo":"18012700956927343102914562"}

[2018-01-27 00:30:33:655] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:30:33:677] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362693021820277763(Long), 2018-01-27 00:30:32.106(Timestamp), 2018-01-27 00:30:33.191(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956927343102914562(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:30:33:679] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:33:824] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:33 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:30:33:826] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:33

[2018-01-27 00:30:33:827] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:33:840] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:33 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:33:841] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:33:841] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:33:844] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:33:979] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:30:33:979] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:33:985] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:30:34:643] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:645] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:647] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:648] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:34:660] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:34:661] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:34:662] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:34:662] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@2120a439

[2018-01-27 00:30:34:662] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:33 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:33 CST 2018, pollingExecuteTime=1516984233825]

[2018-01-27 00:30:34:662] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:33

[2018-01-27 00:30:34:663] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:34:663] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:34:664] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:664] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:33.84(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:34:667] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:34 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:34:667] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:667] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:667] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:34:678] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:679] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:680] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:681] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:34:682] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:34:682] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:34:683] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:34:683] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@37064c76

[2018-01-27 00:30:34:683] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:34 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:33 CST 2018, pollingExecuteTime=1516984233840]

[2018-01-27 00:30:34:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:34

[2018-01-27 00:30:34:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:34:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:34:685] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:685] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:34.667(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:34:736] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:34:743] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:34:768] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:34:789] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:34:813] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:34:813] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:34:813] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:30:34:823] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:34 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:34:823] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:824] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:824] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:34:835] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:836] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:837] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:838] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:34:840] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:34:841] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:34:841] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:34:842] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@29513974

[2018-01-27 00:30:34:842] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:34 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:34 CST 2018, pollingExecuteTime=1516984234667]

[2018-01-27 00:30:34:842] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:34

[2018-01-27 00:30:34:842] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:34:843] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:34:843] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:844] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:34.823(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:34:858] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:34:888] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:34:964] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:34:964] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:34:965] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:30:34:970] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:34 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:34:971] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:971] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:34:971] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:34:980] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:980] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:34:981] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:982] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:34:985] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:34:986] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:34:986] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:34:986] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@2e4e2404

[2018-01-27 00:30:34:987] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:34 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:34 CST 2018, pollingExecuteTime=1516984234823]

[2018-01-27 00:30:34:987] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:34

[2018-01-27 00:30:34:987] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:34:988] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:34:988] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:34:990] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:34.97(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:35:011] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:35:067] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:35:116] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:35:118] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:35:118] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:30:35:146] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:35 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:35:146] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:146] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:147] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:35:160] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:161] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:162] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:163] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:35:169] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:35:170] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:35:170] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:35:170] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@597f2be2

[2018-01-27 00:30:35:171] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:35 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:34 CST 2018, pollingExecuteTime=1516984234970]

[2018-01-27 00:30:35:171] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:35

[2018-01-27 00:30:35:171] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:35:171] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:35:172] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:173] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:35.146(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:35:183] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:35:209] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:35:313] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:35:313] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:35:314] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:30:35:330] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:35 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:35:330] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:330] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:331] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:35:353] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:354] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:355] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:355] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:35:357] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:35:357] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:35:358] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:35:358] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@fd77a9

[2018-01-27 00:30:35:359] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362693021820277763, createTime=Sat Jan 27 00:30:32 CST 2018, editTime=Sat Jan 27 00:30:35 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956927343102914562, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:30:35 CST 2018, pollingExecuteTime=1516984235146]

[2018-01-27 00:30:35:359] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362693021820277763, 上次通知时间: 2018-01-27 00:30:35

[2018-01-27 00:30:35:360] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362693021820277763, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:30:35:360] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:30:35:360] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:361] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:35.33(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956927343102914562(String)

[2018-01-27 00:30:35:371] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:35:397] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:30:35:465] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:35:465] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:35:465] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:30:35:475] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:30:35 CST 2018, 轮询编号: 6362693021820277763

[2018-01-27 00:30:35:476] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:476] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956927343102914562

[2018-01-27 00:30:35:477] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956927343102914562

[2018-01-27 00:30:35:490] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:491] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:30:35:492] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:492] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956927343102914562(String)

[2018-01-27 00:30:35:494] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:30:35:494] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362693019953812483, orderTransactionNo=18012700956927343102914562, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:30:32 CST 2018]

[2018-01-27 00:30:35:494] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:30:35:495] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@4106b9e9

[2018-01-27 00:30:35:495] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:30:35:495] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:30:35:496] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:30:35.475(Timestamp), 7(Integer), FAILED(String), 18012700956927343102914562(String)

[2018-01-27 00:30:35:497] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:30:35:526] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:30:35:617] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:30:35:638] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:30:35:638] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:35:37:951] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:35:37:953] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:35:37:953] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:36:36:342] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516984595470,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362694545648669699,"orderTransactionNo":"18012700956928867161939969"}

[2018-01-27 00:36:36:904] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:36:36:929] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362694545648669699(Long), 2018-01-27 00:36:35.47(Timestamp), 2018-01-27 00:36:36.429(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956928867161939969(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:36:36:981] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:37:091] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:36 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:36:37:091] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:37:092] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:37

[2018-01-27 00:36:37:093] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:37:098] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:37 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:37:099] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:37:099] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:37:104] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:37:243] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:36:37:245] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:37:245] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:36:37:835] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:37:836] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:37:838] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:37:839] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:37:853] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:37:854] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:37:854] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:37:855] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@7ee7be60

[2018-01-27 00:36:37:855] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:37 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:37 CST 2018, pollingExecuteTime=1516984597091]

[2018-01-27 00:36:37:855] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:37:855] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:37

[2018-01-27 00:36:37:856] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:37:856] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:37:857] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:37:858] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:37.098(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:37:860] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:37 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:37:860] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:37:861] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:37:861] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:37:871] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:37:871] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:37:872] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:37:873] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:37:874] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:37:874] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:37:875] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:37:875] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@42bb97c5

[2018-01-27 00:36:37:875] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:37 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:37 CST 2018, pollingExecuteTime=1516984597098]

[2018-01-27 00:36:37:875] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:37:875] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:37

[2018-01-27 00:36:37:876] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:37:876] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:37:876] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:37:877] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:37.86(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:37:907] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:37:912] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:37:954] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:37:977] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:38:006] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:006] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:006] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:36:38:011] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:38 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:38:012] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:012] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:012] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:38:021] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:021] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:022] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:023] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:38:025] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:38:025] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:38:026] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:38:026] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6ce0c564

[2018-01-27 00:36:38:026] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:38 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:37 CST 2018, pollingExecuteTime=1516984597860]

[2018-01-27 00:36:38:026] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:38:027] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:38

[2018-01-27 00:36:38:027] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:38:027] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:38:027] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:029] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:38.011(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:38:045] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:38:084] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:38:157] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:157] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:157] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:36:38:162] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:38 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:38:162] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:162] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:162] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:38:171] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:171] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:172] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:173] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:38:174] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:38:175] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:38:175] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:38:175] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@1035349

[2018-01-27 00:36:38:175] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:38 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:38 CST 2018, pollingExecuteTime=1516984598011]

[2018-01-27 00:36:38:176] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:38:176] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:38

[2018-01-27 00:36:38:176] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:38:176] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:38:177] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:178] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:38.162(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:38:179] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:38:199] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:38:307] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:307] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:307] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:36:38:313] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:38 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:38:313] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:313] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:313] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:38:323] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:323] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:324] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:325] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:38:327] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:38:327] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:38:328] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:38:328] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6e9beb18

[2018-01-27 00:36:38:328] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:38 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:38 CST 2018, pollingExecuteTime=1516984598162]

[2018-01-27 00:36:38:328] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:38:329] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:38

[2018-01-27 00:36:38:329] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:38:329] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:38:330] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:330] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:38.312(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:38:339] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:38:365] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:38:458] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:458] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:458] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:36:38:462] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:38 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:38:463] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:463] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:463] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:38:474] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:474] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:475] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:476] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:38:477] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:38:478] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:38:478] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:38:478] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@2fe5e494

[2018-01-27 00:36:38:479] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362694545648669699, createTime=Sat Jan 27 00:36:35 CST 2018, editTime=Sat Jan 27 00:36:38 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956928867161939969, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:36:38 CST 2018, pollingExecuteTime=1516984598312]

[2018-01-27 00:36:38:479] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:36:38:479] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362694545648669699, 上次通知时间: 2018-01-27 00:36:38

[2018-01-27 00:36:38:479] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362694545648669699, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:36:38:479] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:36:38:480] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:480] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:38.462(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956928867161939969(String)

[2018-01-27 00:36:38:482] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:38:505] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:36:38:608] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:608] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:608] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:36:38:613] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:36:38 CST 2018, 轮询编号: 6362694545648669699

[2018-01-27 00:36:38:613] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:613] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956928867161939969

[2018-01-27 00:36:38:613] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956928867161939969

[2018-01-27 00:36:38:626] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:627] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:36:38:628] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:628] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956928867161939969(String)

[2018-01-27 00:36:38:638] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:36:38:638] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362694544021279747, orderTransactionNo=18012700956928867161939969, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:36:35 CST 2018]

[2018-01-27 00:36:38:639] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:36:38:639] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@19ce015d

[2018-01-27 00:36:38:639] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:36:38:640] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:36:38:640] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:36:38.613(Timestamp), 7(Integer), FAILED(String), 18012700956928867161939969(String)

[2018-01-27 00:36:38:642] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:36:38:663] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:36:38:759] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:36:38:759] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:36:38:759] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:40:50:005] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:40:50:006] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:40:50:007] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:41:30:273] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516984889252,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362695777851298819,"orderTransactionNo":"18012700956930099372892161"}

[2018-01-27 00:41:30:797] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:41:30:818] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362695777851298819(Long), 2018-01-27 00:41:29.252(Timestamp), 2018-01-27 00:41:30.349(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956930099372892161(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:41:30:828] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:30:888] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:30 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:41:30:889] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:30:890] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:30

[2018-01-27 00:41:30:890] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:30:897] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:30 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:30:898] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:30:898] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:30:903] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:31:043] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:41:31:054] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:31:054] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:41:31:644] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:645] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:647] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:648] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:31:662] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:31:663] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:31:664] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:31:664] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@b7f45dc

[2018-01-27 00:41:31:664] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:30 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:30 CST 2018, pollingExecuteTime=1516984890889]

[2018-01-27 00:41:31:664] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:31:665] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:30

[2018-01-27 00:41:31:665] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:31:665] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:31:666] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:667] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:30.897(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:31:669] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:31:670] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:31 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:31:670] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:670] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:670] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:31:679] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:679] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:680] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:681] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:31:682] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:31:683] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:31:683] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:31:683] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@3da952d5

[2018-01-27 00:41:31:683] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:31 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:30 CST 2018, pollingExecuteTime=1516984890897]

[2018-01-27 00:41:31:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:31:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:31

[2018-01-27 00:41:31:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:31:684] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:31:684] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:685] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:31.67(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:31:726] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:41:31:733] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:31:759] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:41:31:815] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:41:31:815] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:31:815] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:41:31:820] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:31 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:31:820] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:820] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:821] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:31:831] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:831] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:832] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:833] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:31:835] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:31:836] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:31:837] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:31:837] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@fd77a9

[2018-01-27 00:41:31:837] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:31 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:31 CST 2018, pollingExecuteTime=1516984891670]

[2018-01-27 00:41:31:837] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:31:837] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:31

[2018-01-27 00:41:31:838] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:31:838] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:31:838] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:839] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:31.82(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:31:852] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:31:899] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:41:31:966] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:41:31:966] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:31:967] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:41:31:972] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:31 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:31:973] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:973] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:31:973] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:31:982] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:983] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:31:985] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:986] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:31:991] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:31:991] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:31:992] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:31:992] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@b7f5df8

[2018-01-27 00:41:31:992] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:31 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:31 CST 2018, pollingExecuteTime=1516984891820]

[2018-01-27 00:41:31:993] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:31:993] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:31

[2018-01-27 00:41:31:993] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:31:993] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:31:994] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:31:995] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:31.972(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:32:024] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:32:076] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:41:32:117] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:41:32:117] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:32:118] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:41:32:125] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:32 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:32:126] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:126] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:126] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:32:139] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:140] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:144] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:146] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:32:152] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:32:153] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:32:153] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:32:154] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@21ba6e

[2018-01-27 00:41:32:154] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:32 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:31 CST 2018, pollingExecuteTime=1516984891972]

[2018-01-27 00:41:32:154] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:32:154] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:32

[2018-01-27 00:41:32:155] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:32:155] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:32:156] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:156] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:32.125(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:32:158] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:32:187] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:41:32:269] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:41:32:270] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:32:270] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:41:32:275] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:32 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:32:275] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:275] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:276] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:32:290] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:290] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:291] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:292] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:32:293] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:32:294] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:32:294] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:32:294] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6a478a7c

[2018-01-27 00:41:32:295] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362695777851298819, createTime=Sat Jan 27 00:41:29 CST 2018, editTime=Sat Jan 27 00:41:32 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956930099372892161, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:41:32 CST 2018, pollingExecuteTime=1516984892125]

[2018-01-27 00:41:32:295] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:41:32:295] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362695777851298819, 上次通知时间: 2018-01-27 00:41:32

[2018-01-27 00:41:32:296] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362695777851298819, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:41:32:297] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:41:32:297] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:298] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:32.275(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930099372892161(String)

[2018-01-27 00:41:32:298] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:32:421] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:41:32:421] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:32:421] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:41:32:426] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:41:32 CST 2018, 轮询编号: 6362695777851298819

[2018-01-27 00:41:32:426] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:427] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930099372892161

[2018-01-27 00:41:32:427] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930099372892161

[2018-01-27 00:41:32:446] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:447] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:41:32:448] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:448] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930099372892161(String)

[2018-01-27 00:41:32:450] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:41:32:450] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362695776261657603, orderTransactionNo=18012700956930099372892161, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:41:29 CST 2018]

[2018-01-27 00:41:32:452] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:41:32:453] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@d626180

[2018-01-27 00:41:32:453] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:41:32:454] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:41:32:455] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:41:32.426(Timestamp), 7(Integer), FAILED(String), 18012700956930099372892161(String)

[2018-01-27 00:41:32:457] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:41:32:458] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:41:32:497] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:41:32:571] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:41:32:571] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:41:32:571] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:43:02:053] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516984981931,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362696165157524483,"orderTransactionNo":"18012700956930488109375489"}

[2018-01-27 00:43:02:058] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:43:02:061] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362696165157524483(Long), 2018-01-27 00:43:01.931(Timestamp), 2018-01-27 00:43:02.054(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956930488109375489(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:43:02:091] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:166] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:43:02:167] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:167] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:167] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:193] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:193] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:195] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:196] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:208] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:208] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:209] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:210] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:217] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:218] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:218] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:218] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@1a53cfba

[2018-01-27 00:43:02:218] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982167]

[2018-01-27 00:43:02:219] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:219] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:219] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:219] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:220] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:220] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.193(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:225] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:266] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:02:320] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:02:321] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:02:322] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:02:332] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:332] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:332] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:332] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:344] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:345] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:346] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:346] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:348] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:349] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:349] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:349] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@456c5825

[2018-01-27 00:43:02:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982193]

[2018-01-27 00:43:02:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:350] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:351] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:351] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.332(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:352] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:378] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:02:473] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:02:474] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:02:474] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:02:484] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:485] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:485] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:485] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:498] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:498] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:500] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:500] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:502] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:502] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:503] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:503] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@267cc663

[2018-01-27 00:43:02:503] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982332]

[2018-01-27 00:43:02:503] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:504] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:504] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:504] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:504] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:505] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.484(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:506] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:532] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:02:628] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:02:628] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:02:628] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:02:645] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:646] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:646] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:646] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:652] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:653] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:654] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:654] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:656] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:656] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:657] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:657] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@9716995

[2018-01-27 00:43:02:657] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982484]

[2018-01-27 00:43:02:657] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:657] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:658] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:658] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:658] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:659] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.645(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:660] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:687] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:02:779] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:02:779] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:02:779] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:02:785] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:785] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:785] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:785] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:792] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:793] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:794] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:795] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:799] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:799] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:800] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:800] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6593ad21

[2018-01-27 00:43:02:800] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982645]

[2018-01-27 00:43:02:800] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:800] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:801] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:801] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:802] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:803] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.785(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:806] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:830] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:02:930] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:02:930] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:02:930] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:02:944] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:02 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:02:945] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:945] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:02:946] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:02:957] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:957] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:02:958] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:959] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:02:968] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:02:969] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:02:969] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:02:969] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@1e85552a

[2018-01-27 00:43:02:969] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362696165157524483, createTime=Sat Jan 27 00:43:01 CST 2018, editTime=Sat Jan 27 00:43:02 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956930488109375489, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:43:02 CST 2018, pollingExecuteTime=1516984982785]

[2018-01-27 00:43:02:970] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: null, 轮询规则MilliSecond: 5000

[2018-01-27 00:43:02:970] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362696165157524483, 上次通知时间: 2018-01-27 00:43:02

[2018-01-27 00:43:02:970] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362696165157524483, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:43:02:970] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:43:02:971] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:02:971] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:02.944(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956930488109375489(String)

[2018-01-27 00:43:02:973] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:02:996] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:43:03:081] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:03:081] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:03:081] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:43:03:086] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:43:03 CST 2018, 轮询编号: 6362696165157524483

[2018-01-27 00:43:03:086] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956930488109375489

[2018-01-27 00:43:03:086] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956930488109375489

[2018-01-27 00:43:03:087] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956930488109375489

[2018-01-27 00:43:03:096] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:03:096] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:43:03:097] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:03:098] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956930488109375489(String)

[2018-01-27 00:43:03:129] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:43:03:130] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362696164738094083, orderTransactionNo=18012700956930488109375489, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:43:01 CST 2018]

[2018-01-27 00:43:03:130] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:43:03:130] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@767da86a

[2018-01-27 00:43:03:130] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:43:03:131] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:43:03:132] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:43:03.086(Timestamp), 7(Integer), FAILED(String), 18012700956930488109375489(String)

[2018-01-27 00:43:03:133] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:43:03:159] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:43:03:232] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:43:03:232] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:43:03:232] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:47:17:620] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:47:17:621] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:47:17:622] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:47:31:635] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516985250204,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362697292347364355,"orderTransactionNo":"18012700956931613311160321"}

[2018-01-27 00:47:32:318] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:47:32:380] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362697292347364355(Long), 2018-01-27 00:47:30.204(Timestamp), 2018-01-27 00:47:31.797(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956931613311160321(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:47:32:407] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:47:32:439] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:47:31 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:47:32:439] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 1, 轮询规则MilliSecond: 5000

[2018-01-27 00:47:32:440] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:47:32

[2018-01-27 00:47:32:441] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:47:37:448] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:47:37 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:47:37:448] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:47:37:448] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:47:37:451] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:47:37:591] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:47:37:592] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:47:37:592] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:47:38:150] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:38:152] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:38:154] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:38:155] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:47:38:167] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:47:38:168] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@27ca09d4

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:47:37 CST 2018, pollingTimes=1, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:47:32 CST 2018, pollingExecuteTime=1516985257439]

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 1, 轮询规则MilliSecond: 5000

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:47:37

[2018-01-27 00:47:38:169] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:47:38:170] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:47:38:170] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:38:171] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:47:37.447(Timestamp), 1(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:47:38:172] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:47:38:203] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:47:42:452] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:47:42 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:47:42:453] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:47:42:453] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:47:42:453] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:47:42:463] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:42:463] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:42:464] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:42:464] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:47:42:466] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:47:42:466] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:47:42:466] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@37064c76

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:47:42 CST 2018, pollingTimes=2, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:47:37 CST 2018, pollingExecuteTime=1516985262447]

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 2, 轮询规则MilliSecond: 5000

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:47:42

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:47:42:467] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:47:42:468] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:42:468] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:47:42.452(Timestamp), 2(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:47:42:469] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:47:42:538] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:47:42:598] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:47:42:598] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:47:42:598] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:47:52:461] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:47:52 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:47:52:462] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:47:52:463] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:47:52:463] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:47:52:479] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:52:480] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:47:52:483] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:52:484] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:47:52:488] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:47:52:489] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:47:52:490] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:47:52:490] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6ae191ac

[2018-01-27 00:47:52:490] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:47:52 CST 2018, pollingTimes=3, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:47:42 CST 2018, pollingExecuteTime=1516985272452]

[2018-01-27 00:47:52:491] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 2, 轮询规则MilliSecond: 5000

[2018-01-27 00:47:52:491] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:47:52

[2018-01-27 00:47:52:491] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:47:52:492] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:47:52:492] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:47:52:493] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:47:52.461(Timestamp), 3(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:47:52:494] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:47:52:561] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:47:52:603] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:47:52:603] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:47:52:603] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:48:02:470] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:48:02 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:48:02:471] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:48:02:471] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:48:02:472] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:48:02:494] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:02:495] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:02:497] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:02:498] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:48:02:501] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:48:02:503] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:48:02:503] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:48:02:504] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@5da5d5fa

[2018-01-27 00:48:02:504] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:48:02 CST 2018, pollingTimes=4, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:47:52 CST 2018, pollingExecuteTime=1516985282461]

[2018-01-27 00:48:02:505] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 4, 轮询规则MilliSecond: 5000

[2018-01-27 00:48:02:506] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:48:02

[2018-01-27 00:48:02:506] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:48:02:506] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:48:02:507] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:02:509] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:48:02.47(Timestamp), 4(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:48:02:510] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:48:02:585] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:48:02:611] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:48:02:611] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:48:02:612] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:48:22:478] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:48:22 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:48:22:478] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:48:22:479] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:48:22:479] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:48:22:490] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:22:491] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:22:493] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:22:493] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:48:22:495] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:48:22:496] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:48:22:496] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:48:22:496] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@21ba6e

[2018-01-27 00:48:22:497] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:48:22 CST 2018, pollingTimes=5, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:48:02 CST 2018, pollingExecuteTime=1516985302470]

[2018-01-27 00:48:22:497] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 4, 轮询规则MilliSecond: 5000

[2018-01-27 00:48:22:497] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:48:22

[2018-01-27 00:48:22:497] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:48:22:498] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:48:22:498] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:22:499] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:48:22.478(Timestamp), 5(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:48:22:500] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:48:22:560] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:48:22:622] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:48:22:623] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:48:22:624] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:48:42:491] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:48:42 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:48:42:492] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:48:42:493] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:48:42:493] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:48:42:512] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:42:513] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:48:42:515] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:42:516] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:48:42:518] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:48:42:519] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:48:42:519] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:48:42:520] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@6a478a7c

[2018-01-27 00:48:42:520] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362697292347364355, createTime=Sat Jan 27 00:47:30 CST 2018, editTime=Sat Jan 27 00:48:42 CST 2018, pollingTimes=6, pollingLimitTimes=7, orderTransactionNo=18012700956931613311160321, status=HTTP_REQUEST_SUCCESS, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=Sat Jan 27 00:48:22 CST 2018, pollingExecuteTime=1516985322478]

[2018-01-27 00:48:42:521] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 10, 轮询规则MilliSecond: 5000

[2018-01-27 00:48:42:521] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362697292347364355, 上次通知时间: 2018-01-27 00:48:42

[2018-01-27 00:48:42:523] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362697292347364355, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:48:42:524] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:69)]
判断是否超过重发次数, 未超重发次数的, 再次进入延迟发送队列:

[2018-01-27 00:48:42:524] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:48:42:525] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:48:42.491(Timestamp), 6(Integer), HTTP_REQUEST_SUCCESS(String), 18012700956931613311160321(String)

[2018-01-27 00:48:42:527] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:48:42:618] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 1

[2018-01-27 00:48:42:630] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:48:42:630] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:48:42:631] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 1

[2018-01-27 00:49:32:503] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:49:32 CST 2018, 轮询编号: 6362697292347364355

[2018-01-27 00:49:32:504] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956931613311160321

[2018-01-27 00:49:32:505] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956931613311160321

[2018-01-27 00:49:32:505] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956931613311160321

[2018-01-27 00:49:32:528] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:49:32:528] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"未支付","status":"NOTPAY"}

[2018-01-27 00:49:32:530] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:49:32:531] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956931613311160321(String)

[2018-01-27 00:49:32:536] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:49:32:538] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362697290241823747, orderTransactionNo=18012700956931613311160321, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:47:30 CST 2018]

[2018-01-27 00:49:32:538] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:134)]
支付结果 *未知 继续轮询查询

[2018-01-27 00:49:32:538] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@aec608b

[2018-01-27 00:49:32:538] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:73)]
订单轮询结束(订单处理失败):

[2018-01-27 00:49:32:539] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:49:32:540] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:49:32.503(Timestamp), 7(Integer), FAILED(String), 18012700956931613311160321(String)

[2018-01-27 00:49:32:542] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:49:32:626] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

[2018-01-27 00:49:32:643] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:49:32:644] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:49:32:644] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:52:04:768] [INFO ] [method:com.queue.app.orderpolling.message.OrderPollingMessageListener.onMessage(OrderPollingMessageListener.java:36)]
订单轮询接收消息: {"createTime":1516985507435,"pollingExecuteTime":0,"bankTypeCode":"ALIPAY_IMPL","pollingLimitTimes":0,"pollingTimes":0,"id":6362698370941998083,"orderTransactionNo":"18012700956932692220346370"}

[2018-01-27 00:52:04:911] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 1

[2018-01-27 00:52:04:915] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:52:04:916] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:52:05:505] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: INSERT INTO `OrderPollingRecord`(`id`,`createTime`,`editTime`,`pollingTimes`,`pollingLimitTimes`,`bankTypeCode`,`orderTransactionNo`,`status`,`pollingRule`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 

[2018-01-27 00:52:05:532] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 6362698370941998083(Long), 2018-01-27 00:51:47.435(Timestamp), 2018-01-27 00:52:04.966(Timestamp), 0(Integer), 7(Integer), ALIPAY_IMPL(String), 18012700956932692220346370(String), CREATED(String), {1:1,2:1,3:2,4:2,5:4,6:4,7:10}(String)

[2018-01-27 00:52:05:577] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:52:05:671] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:31)]
传过来的对象加到延时队列: OrderPollingRecord [id=6362698370941998083, createTime=Sat Jan 27 00:51:47 CST 2018, editTime=Sat Jan 27 00:52:04 CST 2018, pollingTimes=0, pollingLimitTimes=7, orderTransactionNo=18012700956932692220346370, status=CREATED, pollingRule={1:1,2:1,3:2,4:2,5:4,6:4,7:10}, lastPollingTime=null, pollingExecuteTime=0]

[2018-01-27 00:52:05:672] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:50)]
轮询规则Value: 1, 轮询规则MilliSecond: 5000

[2018-01-27 00:52:05:673] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:51)]
轮询编号: 6362698370941998083, 上次通知时间: 2018-01-27 00:52:05

[2018-01-27 00:52:05:674] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingQueue.addTaskDelayQueue(OrderPollingQueue.java:53)]
轮询编号: 6362698370941998083, 任务添加成功后,当前队列大小: 1

[2018-01-27 00:52:10:680] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:50)]
执行轮询时间: Sat Jan 27 00:52:10 CST 2018, 轮询编号: 6362698370941998083

[2018-01-27 00:52:10:681] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:96)]
银行渠道编号: ALIPAY_IMPL, 平台交易流水号: 18012700956932692220346370

[2018-01-27 00:52:10:681] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:20)]
银行渠道(ALIPAY_IMPL) 银行渠道交易流水号: 18012700956932692220346370

[2018-01-27 00:52:10:684] [INFO ] [method:com.queue.utils.HttpUtils.get(HttpUtils.java:33)]
Http Get请求地址:http://127.0.0.1:8080/queue-web-gateway/bankQuery?orderTransactionNo=18012700956932692220346370

[2018-01-27 00:52:10:824] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:45)]
当前活动线程: 2

[2018-01-27 00:52:10:826] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:46)]
最大线程: 50

[2018-01-27 00:52:10:832] [INFO ] [method:com.queue.app.orderpolling.App$1.run(App.java:48)]
@tasks.size(): 0

[2018-01-27 00:52:11:490] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:24)]
银行渠道(ALIPAY_IMPL) 返回结果: {"message":"支付失败","status":"FAILED"}

[2018-01-27 00:52:11:492] [INFO ] [method:com.queue.banks.impl.AliPayImpl.orderQuery(AliPayImpl.java:31)]
银行渠道(ALIPAY_IMPL) 解析返回结果: {"message":"支付失败","status":"FAILED"}

[2018-01-27 00:52:11:494] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: SELECT `id`,`orderTransactionNo`,`bankTypeCode`,`productName`,`status`,`createTime` FROM `Order` WHERE `orderTransactionNo`=? 

[2018-01-27 00:52:11:495] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 18012700956932692220346370(String)

[2018-01-27 00:52:11:513] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==      Total: 1

[2018-01-27 00:52:11:515] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:102)]
平台订单当前信息: Order [id=6362698369213944835, orderTransactionNo=18012700956932692220346370, bankTypeCode=ALIPAY_IMPL, productName=测试商品, status=WAITING_PAYMENT, createTime=Sat Jan 27 00:51:47 CST 2018]

[2018-01-27 00:52:11:515] [INFO ] [method:com.queue.order.service.impl.OrderServiceImpl.completeTrade(OrderServiceImpl.java:112)]
支付结果为 *失败 结束订单

[2018-01-27 00:52:11:515] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `Order` SET `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:52:11:516] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: FAILED(String), 18012700956932692220346370(String)

[2018-01-27 00:52:11:517] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:52:11:517] [INFO ] [method:com.queue.app.orderpolling.core.OrderPollingPersist.getOrderResult(OrderPollingPersist.java:56)]
订单轮询结果: com.queue.orderpolling.vo.OrderQueryResult@5def8811

[2018-01-27 00:52:11:518] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==>  Preparing: UPDATE `OrderPollingRecord` SET `editTime`=?, `pollingTimes`=?, `status`=? WHERE `orderTransactionNo`=? 

[2018-01-27 00:52:11:519] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
==> Parameters: 2018-01-27 00:52:10.68(Timestamp), 1(Integer), FAILED(String), 18012700956932692220346370(String)

[2018-01-27 00:52:11:519] [DEBUG] [method:org.apache.ibatis.logging.jdbc.BaseJdbcLogger.debug(BaseJdbcLogger.java:145)]
<==    Updates: 1

[2018-01-27 00:52:11:594] [INFO ] [method:com.queue.app.orderpolling.App$1$1.run(App.java:55)]
tasks.size(): 0

